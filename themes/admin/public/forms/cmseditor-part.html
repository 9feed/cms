<div data---="modal__cmseditor.form__if:part;width:500;autofocus:true;submit:cmseditorpart/submit" class="hidden">

	<div>
		<span class="link cancel"><i class="fa fa-times"></i></span>
		<label><i class="fa fa-object-ungroup"></i>@(Edit part)</label>
	</div>

	<div>
		<div class="padding bg-yellow">
			<div data---="input__cmseditor.part.name__required:true;maxlength:30" class="m">@(Name)</div>
			<div class="hidden" data-bind="cmseditor.part.isnew__show:!value">
				<span class="link b red exec" data-exec="cmseditorpart/remove"><i class="fa fa-times-circle mr5"></i>@(Remove part)</span>
			</div>
		</div>
	</div>

	<div>
		<div data---="validation__cmseditor.part">
			<span class="link cancel">@(Cancel)</span>
			<button name="submit">@(APPLY)</button>
		</div>
	</div>
</div>

<script>

	PLUGIN('cmseditorpart', function(exports) {
		exports.remove = function() {
			SETTER('confirm', 'show', '@(Are you sure you want to remove this part?)', ['"trash-o" @(Remove)', '@(Cancel)'], function(index) {
				if (!index) {
					var target = cmseditor.part.target;
					target.rattr('data-cms-part');
					target.rclass('CMS_part');
					cmseditor.instance.change(true);
					SET('cmseditor.form', '');
				}
			});
		};

		exports.submit = function(hide) {
			var editor = cmseditor.instance;
			var target = editor.getTarget();
			var form = cmseditor.part;
			form.target.attrd('cms-part', form.name);
			form.target.aclass('CMS_part');
			editor.change(true);
			hide();
		};
	});

</script>