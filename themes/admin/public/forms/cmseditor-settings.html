<div data---="modal__cmseditor.form__if:settings;width:500;submit:cmseditorsettings/submit;scrollbar:true" class="hidden">

	<div>
		<span class="link cancel"><i class="fa fa-times"></i></span>
		<label><i class="fa fa-cofg"></i>@(Widget settings)</label>
	</div>

	<div>
		<div class="padding">
			<div data---="multioptions__cmseditor.settings.options__$id:cmseditor.settings"></div>
		</div>
	</div>

	<div>
		<div data---="validation__cmseditor.settings">
			<span class="link cancel">@(Cancel)</span>
			<button name="submit">@(APPLY)</button>
		</div>
	</div>

</div>

<script>

	PLUGIN('cmseditorsettings', function(exports) {
		exports.submit = function(hide) {
			hide();
			setTimeout(function() {

				var form = cmseditor.settings;
				var prev = cmseditor.widgetsettings[form.id];
				var dep = FIND('#cmseditor.settings').dependencies();

				// dep === Code lists

				form.exports.configure && form.exports.configure.call(dep, form.options, cmseditor.settings.target, prev);
				cmseditor.widgetsettings[form.id] = form.options;
				var editor = cmseditor.instance;
				editor.change(true);

				setTimeout(function() {
					editor.autoresize();
				}, 500);

				var target = editor.getTarget();
				editor.setTarget(null);
				target && target.trigger('click');
			}, 1200);
		};
	});

</script>